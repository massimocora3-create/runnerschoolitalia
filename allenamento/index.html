<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Runnerâ€™s School Italia â€“ Allenamento della settimana</title>

<style>
:root{
  --bg:#020617;
  --bg-card:#0b1120;
  --accent:#f97316;
  --text:#e5e7eb;
  --text-muted:#9ca3af;
  --border:#1f2937;
  --radius:20px;
  --shadow:0 18px 45px rgba(0,0,0,.55);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  background:radial-gradient(circle at top,#0b1120 0,#020617 55%,#000 100%);
  color:var(--text);
}
.app{
  max-width:520px;
  margin:0 auto;
  padding:18px 14px 90px;
}
.header{
  background:var(--bg-card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:16px;
  margin-bottom:18px;
}
.header h1{margin:0;font-size:18px}
.header p{margin:6px 0 0;font-size:13px;color:var(--text-muted)}

details.level{
  background:var(--bg-card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  margin-bottom:14px;
  overflow:hidden;
}
details.level>summary{
  list-style:none;
  cursor:pointer;
  padding:16px;
  font-size:15px;
  font-weight:700;
  color:var(--accent);
  display:flex;
  justify-content:space-between;
  align-items:center;
}
details.level>summary::-webkit-details-marker{display:none}

details.week{border-top:1px dashed var(--border)}
details.week>summary{
  list-style:none;
  cursor:pointer;
  padding:12px 16px;
  font-size:14px;
  font-weight:600;
}
details.week>summary::-webkit-details-marker{display:none}
.week-content{
  padding:10px 16px 16px;
  font-size:13px;
  line-height:1.45;
}

.chev{
  width:10px;height:10px;
  border-right:2px solid var(--text-muted);
  border-bottom:2px solid var(--text-muted);
  transform:rotate(45deg);
}
details[open]>summary .chev{transform:rotate(225deg)}

.back{
  position:fixed;
  bottom:18px;
  right:18px;
  width:48px;
  height:48px;
  background:var(--accent);
  color:#000;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
  font-weight:700;
  text-decoration:none;
  box-shadow:0 10px 25px rgba(0,0,0,.5);
}
</style>
</head>

<body>

<a class="back" href="https://massimocora3-create.github.io/runnerschoolitalia/">â†</a>

<div class="app">

<div class="header">
  <h1>ğŸ”¥ Allenamento della settimana</h1>
  <p>Seleziona il tuo livello</p>
</div>

<details class="level" data-level="L1">
  <summary>ğŸŸ§ Livello 1<div class="chev"></div></summary>
</details>

<details class="level" data-level="L2S">
  <summary>ğŸŸ¦ Livello 2 â€“ Sprint<div class="chev"></div></summary>
</details>

<details class="level" data-level="L2M">
  <summary>ğŸŸ¦ Livello 2 â€“ Medio<div class="chev"></div></summary>
</details>

<details class="level" data-level="L2E">
  <summary>ğŸŸ¦ Livello 2 â€“ Endurance<div class="chev"></div></summary>
</details>

</div>

<script>
(function(){

  const today = new Date().toISOString().slice(0,10);
  const params = new URLSearchParams(location.search);
  const selectedLevel = params.get("level");

  const levels = document.querySelectorAll("details.level");

  levels.forEach(l=>{
    l.open = false;
    l.addEventListener("toggle",()=>{
      if(l.open){
        const u = new URL(location.href);
        u.searchParams.set("level", l.dataset.level);
        location.href = u.toString();
      }
    });
  });

  if(!selectedLevel) return;

  fetch("/runnerschoolitalia/programma/index.html",{cache:"no-store"})
    .then(r=>r.text())
    .then(html=>{
      const temp=document.createElement("div");
      temp.innerHTML=html;

      const srcLevel=temp.querySelector(
        `details.level[data-level="${selectedLevel}"]`
      );
      if(!srcLevel) return;

      const week=[...srcLevel.querySelectorAll("details.week")]
        .find(w=>today>=w.dataset.start && today<=w.dataset.end);
      if(!week) return;

      const title=week.querySelector(".week-title");
      const dates=week.querySelector(".week-dates");
      if(title && dates){
        title.textContent =
          title.textContent.trim()+"â€“"+dates.textContent.trim();
        dates.remove();
      }

      const target=document.querySelector(
        `details.level[data-level="${selectedLevel}"]`
      );
      if(!target) return;

      target.querySelectorAll("details.week").forEach(w=>w.remove());
      target.appendChild(week.cloneNode(true));
      target.open=true;
    });

})();
</script>

</body>
</html>

